<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Docker を使うと何がうれしいのか自分なりに考えてみた | command not found:</title>
    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/fonts.css" />
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T35T2MCR4K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T35T2MCR4K');
</script>

  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="../../">Home</a></li>
      
      <li><a href="../../about/">About</a></li>
      
      <li><a href="../../tags/">Tags</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Docker を使うと何がうれしいのか自分なりに考えてみた</span></h1>

<h2 class="date">2021/12/04</h2>
</div>

<main>
<p><a href="https://qiita.com/advent-calendar/2021/sakura">さくらインターネット Advent Calendar 2021</a> 4日目の記事になります。</p>
<p>Docker が何者なのか、 Docker の使い方などの情報はインターネットに沢山公開されていますが、
「 Docker を使うと何がうれしいのか」という情報が目に入ってきたことはないので、
サーバー管理者、アプリケーション開発者がいる環境で、
Docker を使うと何がうれしいのかということを自分なりに考え、テキストに起こしてみました。</p>
<h1 id="きっかけ">きっかけ</h1>
<p>文学フリマに出店したときに、「インフラエンジニアやってます。仕事は仮想サーバーですが、 Docker に興味はあって調べてはみたのですが、 Docker を使うと何がうれしいのかということをイメージするには至れなかったです。仮想サーバーから Docker になると何がうれしいのかということをイメージできるような情報があると、 このモヤモヤが晴れるのではないかと思っています。」という話を参加者の一人からされました。</p>
<p>確かに、自分もそのような情報が目に入ってきたことはりませんでした。
社内で「 Docker を使うと何がうれしいのか」というテキストを自分で書いて、チーム内に展開しており、
会社の情報は入っていないので、これを公開すればよいかもしれないなと考え、今回、この記事を書くに至っています。</p>
<h1 id="アプリケーションとランタイム">アプリケーションとランタイム</h1>
<p>これから先の説明に利用する、アプリケーションとランライムという言葉を定義しておきます。</p>
<ul>
<li>アプリケーション: 目的の処理を実行するもの</li>
<li>ランタイム: アプリケーションを実行するときに必要なもの</li>
</ul>
<p>シェルスクリプトで、集計するスクリプトを作成したと仮定した場合に、
作成したシェルスクリプトはアプリケーションで、
シェルスクリプトの中で sed, awk などを使っていれば、
シェルスクリプトというアプリケーションの実行に必要なものということで、 sed, awk はランタイムとなります。</p>
<h1 id="想定読者">想定読者</h1>
<p>下記に該当する方に自分ごととしてイメージしながら読んでもらえるのではないかと考えています。</p>
<ul>
<li>アプリケーションを実行するための環境を Linux でサーバーを構築している</li>
<li>サーバーを管理する人とアプリケーションを開発する人が分かれており、アプリケーションを実行するための環境を Linux で構築するサーバーを管理する側の人である</li>
<li>バッチサーバーなるサーバーを用意し、そこで cron を使い様々なバッチを実行している</li>
</ul>
<h1 id="docker-は何をするものなのか">Docker は何をするものなのか</h1>
<p>インターネットに沢山の情報があるため、 Docker の詳細な内容は、そちらにお任せします。</p>
<ul>
<li>アプリケーションを実行する手段</li>
<li>アプリケーションを Docker の提供している方法でパッケージングする</li>
<li>Docker の提供している方法でパッケージングした(された)アプリケーションを Docker の提供している方法で実行する</li>
<li>Docker の提供している方法でパッケージングした(された)アプリケーションを実行するため、サーバーに Docker がインストールする</li>
</ul>
<p>社内で動かしている Redmine のアクティビティを定期的に Slack へ通知するアプリケーションを例に、
サーバー上でのアプリケーション、ランタイムの構成を図にしました。</p>
<h2 id="docker-を使った場合のサーバー構成">Docker を使った場合のサーバー構成</h2>
<p>Docker でパッケージングされたアプリケーションが、
サーバーにインストールしている Docker を使い起動します。</p>
<p><img src="../../imgs/benefits-of-using-docker/redmine2slack-docker.png" alt="Docker を使った場合のサーバー構成"></p>
<h2 id="docker-を使わない場合のサーバー構成">Docker を使わない場合のサーバー構成</h2>
<p>サーバーにインストールしたランタイムを利用し、アプリケーションが起動します。</p>
<p><img src="../../imgs/benefits-of-using-docker/redmine2slack-host.png" alt="Docker を使わない場合のサーバー構成"></p>
<h1 id="サーバー管理者になって考えてみる">サーバー管理者になって考えてみる</h1>
<p>アプリケーション開発者とサーバー管理者が異なっているという状況にてバッチサーバーが運用されている仮定のもと、
以下の観点から、 Docker を使わない場合はどうなりそうか、 Docker を使う場合はどうなりそうか考えてみます。</p>
<ul>
<li>依存関係</li>
<li>移植性</li>
<li>アップデート</li>
</ul>
<h2 id="docker-を使わない場合">Docker を使わない場合</h2>
<p>Docker を使わず、ホストサーバーにインストールされたランタイムを複数アプリケーションが参照しているバッチサーバーを想定し、観点に対して、どうなりそうか考えてみます。</p>
<p><img src="../../imgs/benefits-of-using-docker/batch-server-host.png" alt="Docker を使わない場合"></p>
<h3 id="依存関係">依存関係</h3>
<ul>
<li>アプリケーションの実装がホストサーバーのランタイムの制約を受ける</li>
<li>ランタイムの管理がサーバー管理者側にあるとすると、アプリケーション開発者はホストサーバーにランタイムが無い場合、サーバー管理者との連携する必要がある</li>
<li>同じランタイムの別バージョンを利用したいという要望がアプリケーション開発者からあった場合にサーバー管理者が頭をひねる必要がある</li>
<li>アプリケーション開発者にバッチの配置を解放すると、配置されたバッチがどのランタイムに依存しているのかサーバー管理者にはわからない</li>
</ul>
<h3 id="移植性">移植性</h3>
<ul>
<li>アプリケーションとランタイムの依存関係を何かしらの手段で管理していなければサーバー移行時に依存関係の調査から必要になる</li>
<li>アプリケーション開発者とサーバー管理者のコミュニケーションコストが発生する</li>
<li>「アプリケーションを配置すればそのまま動く」とならない状況は往々にして移行が捗らず頓挫する(経験談)</li>
</ul>
<h3 id="アップデート">アップデート</h3>
<ul>
<li>ランタイムを更新することにより動かなくなるアプリケーションが出てくる可能性がある</li>
<li>複数のアプリケーションが同じランタイムを参照していた場合、ランタイム更新することによる影響が計り知れない</li>
</ul>
<h2 id="docker-を使う場合">Docker を使う場合</h2>
<p>Docker を使うことによってバッチサーバーがどのようになりそうか考えてみます。</p>
<p><img src="../../imgs/benefits-of-using-docker/batch-server-docker.png" alt="Docker を使わない場合"></p>
<h3 id="依存関係-1">依存関係</h3>
<ul>
<li>アプリケーションを実行するために必要なランタイムは Docker のみとなる</li>
<li>サーバー管理者は、アプリケーション実行のためのランタイムを管理しなくてよくなる</li>
<li>アプリケーション開発者は、ランタイムを自身でコントロールできる</li>
<li>アプリケーションの実装がホストサーバーにインストールされたランタイムに制約されなくなる</li>
</ul>
<h3 id="移植性-1">移植性</h3>
<ul>
<li>サーバー管理者は、 Docker の実行環境を整備すればよい</li>
<li>アプリケーション開発者は、アプリケーションを Docker で実行できるようにすればよい</li>
<li>Docker の実行環境と Docker でパッケージングされたアプリケーションがあれば、アプリケーションを実行できる</li>
</ul>
<h3 id="アップデート-1">アップデート</h3>
<ul>
<li>個々のアプリケーションはランタイムを含め独立している</li>
<li>サーバー管理者が更新を気にする範囲は Docker の実行環境に限定される</li>
<li>アプリケーション開発者がランタイムを更新しても、その影響は開発したアプリケーションに限定される</li>
</ul>
<h1 id="docker-を使うと何がうれしいか">Docker を使うと何がうれしいか</h1>
<p>アプリケーション開発者には、アプリケーションを Docker で実行できるようパッケージングすれば、
サーバーにどのようなランタイムが入っていなければならないのかを気にせず開発できる環境を提供でき、
サーバー管理者は、 Docker によるアプリケーションの実行環境を運用するというところだけに注力すればよくなるということが、
Docker を使うことによるうれしいことなのではないかと考えています。</p>
<p>次回は、  <a href="../../posts/imagine-situation-using-docker">Docker でのアプリケーション実行環境を提供したとして何が起きそうか</a> について考えてみます。</p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

